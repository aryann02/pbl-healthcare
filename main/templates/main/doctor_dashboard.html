<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Doctor Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background-color: #f4f8fb;
      font-family: 'Segoe UI', sans-serif;
    }

    .card {
      border-radius: 15px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
      background: #fff;
      margin-bottom: 2rem;
    }

    h2, h4 {
      color: #0d6efd;
    }

    .dashboard-stats .card {
      border-left: 5px solid #0d6efd;
    }

    .badge {
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <div class="container mt-5">
    <h2 class="mb-4 text-center">Doctor Dashboard</h2>

    <!-- Doctor Profile -->
    <div class="card p-4 mb-4">
      <h5>Welcome, Dr. {{ doctor.name }}</h5>
      <p><strong>Specialization:</strong> {{ doctor.specialization }}</p>
      <p><strong>Location:</strong> {{ doctor.location }}</p>
      <p><strong>Available:</strong> {{ doctor.available_from|time:"H:i" }} to {{ doctor.available_to|time:"H:i" }}</p>
    </div>

    <!-- Dashboard Stats -->
    <div class="row dashboard-stats text-center mb-4">
      <div class="col-md-3">
        <div class="card p-3">
          <h5>Total Appointments</h5>
          <h3>{{ appointments.count }}</h3>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card p-3">
          <h5>Today</h5>
          <h3>{{ today_appointments.count }}</h3>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card p-3">
          <h5>Upcoming</h5>
          <h3>{{ upcoming_appointments.count }}</h3>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card p-3">
          <h5>Past</h5>
          <h3>{{ past_appointments.count }}</h3>
        </div>
      </div>
    </div>

    <!-- Todayâ€™s Appointments -->
    <div class="card p-4">
      <h4>Today's Appointments</h4>
      {% if today_appointments %}
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Patient</th>
              <th>Time</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            {% for appointment in today_appointments %}
              <tr>
                <td>{{ appointment.user.username }}</td>
                <td>{{ appointment.time|time:"H:i" }}</td>
                <td>
                  <span class="badge bg-success">
                    {{ appointment.status }}
                  </span>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p>No appointments today.</p>
      {% endif %}
    </div>

    <!-- Upcoming Appointments -->
    <div class="card p-4">
      <h4>Upcoming Appointments</h4>
      {% if upcoming_appointments %}
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Patient</th>
              <th>Date</th>
              <th>Time</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            {% for appointment in upcoming_appointments %}
              <tr>
                <td>{{ appointment.user.username }}</td>
                <td>{{ appointment.date }}</td>
                <td>{{ appointment.time|time:"H:i" }}</td>
                <td>
                  <span class="badge bg-warning text-dark">
                    {{ appointment.status }}
                  </span>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p>No upcoming appointments.</p>
      {% endif %}
    </div>

    <!-- Past Appointments -->
    <div class="card p-4">
      <h4>Past Appointments</h4>
      {% if past_appointments %}
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Patient</th>
              <th>Date</th>
              <th>Time</th>
            </tr>
          </thead>
          <tbody>
            {% for appointment in past_appointments %}
              <tr>
                <td>{{ appointment.user.username }}</td>
                <td>{{ appointment.date }}</td>
                <td>{{ appointment.time|time:"H:i" }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p>No past appointments.</p>
      {% endif %}
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
